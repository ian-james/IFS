extends ../../../shared/views/pageLayout.pug

block scripts

block content
    div(ng-controller="surveyStatCtrl").uk-container
        h2.uk-card-title Survey Stats
        p.uk-text-meta View Reponse Rate for Surveys by Question
        .uk-grid-small.uk-grid
            .uk-width-1-3
                div.uk-card.uk-card-default
                    .uk-card-header
                        h3.uk-card-title Survey Selection
                    .uk-card-body
                        .uk-margin
                            label.uk-form-label Available Surveys
                            select(data-ng-options="survey as survey.title for survey in surveys track by survey.id" ng-model="selectedSurvey" ng-change="getSurveyQuestions()").uk-select
                    .uk-card-footer
                        table.uk-table
                            thead
                                tr
                                    th Information
                                    th
                            tbody
                                tr
                                    td # of Questions
                                    td(ng-bind="numQuestions").uk-text-primary
                                tr
                                    td Field
                                    td(ng-bind="field").uk-text-primary  
                                tr
                                    td Author
                                    td(ng-bind="author").uk-text-primary
            .uk-width-expand
                div.uk-card.uk-card-default
                    .uk-card-header
                        h3.uk-card-title Question Selection
                    .uk-card-body
                        .uk-margin
                            label.uk-form-label Available Questions
                            select(data-ng-options="question as question.text for question in questions track by question.id" ng-model="selectedQuestion" ng-change="getQuestionResponses()").uk-select
                    .uk-card-footer
                        div(ng-if="graphData.data && graphData.data.length > 0")
                            canvas(class="chart-base" id="bar" chart-options="graphData.options" chart-type="type" chart-labels="graphData.labels" chart-data="graphData.data")

                    .uk-card-footer
                        h2.uk-card-title Graph Options
                        .uk-grid
                            .uk-width-1-2
                                label.uk-form-label Start Date
                                .uk-form-controls 
                                    input(type="date" ng-model="startDate" value="{{startDate}}" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}").uk-input.uk-margin-bottom
                            .uk-width-1-2
                                label.uk-form-label Graph Type
                                .uk-form-controls
                                    select(ng-model="type" ng-options="g for g in availableTypes" ng-init="type=availableTypes[0]").uk-select.uk-margin-bottom
                            .uk-width-1-2
                                label.uk-form-label End Date
                                .uk-form-controls 
                                    input(type="date" ng-model="endDate" value="{{endDate}}" pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}").uk-input.uk-margin-bottom
                            .uk-width-1-2
                                label.uk-form-label Response type
                                .uk-form-controls
                                    select(ng-model="selectedResponseType" ng-options="t for t in responseType" ng-init="selectedResponseType=responseType[0]").uk-select.uk-margin-bottom
                            .uk-width-1-2
                                button.uk-button.uk-button-primary Update 


    br
    br
    script(src="../components/SurveyAdmin/views/scripts/surveyStatCtrl.js")